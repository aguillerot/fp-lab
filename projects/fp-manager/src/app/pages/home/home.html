<p-toast />
@if (isEmpty()) {
<!-- Empty State -->
<div class="empty-state">
  <span class="pi pi-qrcode empty-icon"></span>
  <h2>No saved settings</h2>
  <p>Scan a QR code from your Sigma FP camera to save and manage your shooting settings.</p>
  <p-button label="Scan QR Code" icon="pi pi-qrcode" (onClick)="openScanDialog()" />
</div>
} @else {
<!-- Settings List -->
<div class="header">
  <h2>Saved Settings</h2>
  <p-button icon="pi pi-qrcode" (onClick)="openScanDialog()" rounded aria-label="Scan QR Code" />
</div>

<p-card>
  <ul class="settings-list">
    @for (item of decodedSettings(); track item.id) {
    <li
      class="settings-item"
      tabindex="0"
      role="button"
      (click)="openSettings(item)"
      (keydown.enter)="openSettings(item)"
      (keydown.space)="openSettings(item)"
    >
      <div class="mode-badge">{{ item.decoded.shootingMode }}</div>
      <div class="settings-info">
        <span class="settings-title"> {{ item.decoded.shootingModeName || 'Untitled Preset' }} </span>
        <span class="settings-subtitle">
          @if (item.decoded.shootingModeIcon) { {{ item.decoded.shootingModeIcon }} Â· } {{ item.scannedAt | date: 'MMM
          d, y' }}
        </span>
      </div>
      <p-button
        icon="pi pi-trash"
        severity="danger"
        text
        rounded
        (onClick)="deleteSettings($event, item)"
        aria-label="Delete"
      />
    </li>
    }
  </ul>
</p-card>
}
<lib-scan-dialog [(visible)]="scanDialogVisible" (qrCodeScanned)="handleQrCodeScanned($event)"></lib-scan-dialog>
