# Copilot Instructions for Sigma FP Decoder Workspace

## Project Overview

This is an Angular monorepo workspace for decoding and managing Sigma FP camera settings via QR codes.

## Architecture

### Applications

#### 1. fp-analysis (`projects/fp-analysis/`)

- **Purpose**: Analyze QR codes generated by Sigma FP cameras
- **Functionality**:
  - Scan QR codes containing camera settings (aperture, ISO, white balance, etc.)
  - Extract settings data from QR code bytes
  - Compare bytes between multiple scans to identify setting locations
  - Example workflow: scan with ISO 100, then ISO 200, compare which bytes changed

#### 2. fp-manager (`projects/fp-manager/`)

- **Purpose**: Read and write Sigma FP camera settings via QR codes
- **Functionality**:
  - Read QR codes from Sigma FP camera
  - Display decoded camera settings
  - Edit settings values
  - Generate new QR codes with modified settings
  - Generated QR codes can be scanned back by the Sigma FP camera

### Shared Library

#### shared-fp (`projects/shared-fp/`)

- **Purpose**: Shared code between applications
- **Contains**:
  - QR code scanning component
  - Camera settings models
  - Decoders for reading/writing QR code bytes
  - Pipes for data transformation

## Tech Stack

- **Framework**: Angular 21
- **UI Components**: Angular Material, Angular CDK
- **Styling**: Tailwind CSS 4
- **QR Code Reading**: jsqr
- **Testing**: Vitest
- **Linting**: ESLint with angular-eslint
- **Language**: TypeScript 5.9
- **Build System**: Angular CLI

## Code Conventions

### Angular

- Use standalone components (Angular 21 default)
- Use signals for reactive state management
- Use the `inject()` function for dependency injection
- Follow Angular style guide for file naming: `*.component.ts`, `*.service.ts`, `*.pipe.ts`, etc.

### TypeScript

- Use strict TypeScript configuration
- Prefer interfaces over types for object shapes
- Use descriptive names for decoders (e.g., `iso-sensitivity.ts`, `white-balance-mode.ts`)

### Styling

- Use Tailwind CSS utility classes
- Follow mobile-first responsive design

### Testing

- Write tests using Vitest
- Test files should be colocated with source files or in spec files

### Code Quality

- Run `ng lint` before committing
- Follow Prettier configuration in package.json
- Use single quotes for strings
- Max line width: 100 characters

## Project Structure

```
fp-lab/
├── projects/
│   ├── fp-analysis/        # QR analysis app
│   ├── fp-manager/         # Settings manager app
│   └── shared-fp/          # Shared library
│       └── src/lib/
│           ├── components/ # Shared components (QR scanner)
│           ├── decoders/   # Byte decoders for camera settings
│           ├── models/     # TypeScript interfaces/models
│           ├── pipes/      # Angular pipes
│           └── services/   # Shared services
├── angular.json
├── package.json
└── tsconfig.json
```

## Common Commands

- `ng serve fp-analysis` - Start fp-analysis dev server
- `ng serve fp-manager` - Start fp-manager dev server
- `ng build shared-fp` - Build shared library
- `ng test` - Run tests with Vitest
- `ng lint` - Run ESLint
